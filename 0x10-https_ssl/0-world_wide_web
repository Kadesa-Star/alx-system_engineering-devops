#!/usr/bin/env bash
# Script to report information about server domains
# shellcheck disable=SC2086

check_domain() {
    SUBDOMAINS='www lb-01 web-01 web-02'

    if [ -z "$1" ]; then
        echo "Domain name not provided."
        exit 1
    fi

    check_subdomain() {
        local sub="$1"
        local dom="$2"
        local result
        result=$(dig +short -t A "$sub.$dom")

        if [ -n "$result" ]; then
            echo "The subdomain $sub is a A record and points to $result"
        else
            echo "The subdomain $sub did not return a valid record."
        fi
    }

    if [ -z "$2" ]; then
        for sub in $SUBDOMAINS; do
            check_subdomain "$sub" "$1"
        done
    else
        check_subdomain "$2" "$1"
    fi
}

check_domain "$1" "$2"
